-- mobile computer modems are always on back. Open rednet on modem.
rednet.open('back')

local menuinterface = dofile('/modules/menuinterface.lua')
local update = dofile('/modules/update.lua')
update()

term.clear()
term.setCursorPos(2, 2)
print('Connecting to server...')

local serverID = rednet.lookup('commands', 'command_server')
-- wait until command server is found
if serverID == nil then
	print('Failed to reach server.')
	io.read()
	os.restart()
end

-- Create a new menuinterface
local menu = menuinterface.new()
local title = 'Commander'

-- Add menu data from /menus/main.lua to menuinterface
menu:add(title, dofile('/menus/main.lua'))

-- Tell menuinterface to use the menu
menu:use(title)

-- Enable menu titles
menu:showTitle()

-- Display the menu
menu:show()